<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>First Components | Essential React</title>

    <link rel="icon" href="../img/zuehlke_logo.jpg" />

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/Zuehlke/zuehlke-reveal-package@f42658c99dec0812d754d935263a70b93b81f54b/release/index.css"
    />
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section class="title-slide">
          <h1>First Components</h1>
          <h2>Essential React</h2>
        </section>
        <section>
          <section>
            <h2>Simple React Component</h2>
            <span class="code">Greeting.tsx</span>
            <!-- prettier-ignore -->
            <pre>
                    <code class="hljs jsx" data-trim>
                        <script type="text/template">
                        const name = 'World';

                        export function Greeting() {
                            return (
                                <div>
                                  <h1>Hello, {name}</h1>
                                  <p>This is your first component!</p>
                                </div>
                            );
                        }
                        </script>
                    </code>
                </pre>
          </section>
          <section>
            <h3>Single-line vs. multi-line JSX</h3>
            <p>Multi-line JSX should always be wrapped in parentheses.</p>
            <!-- prettier-ignore -->
            <pre><code class="hljs jsx" data-trim data-line-numbers="2,6,11|"><script type="text/template">
                        function SingleLineComponent() {
                            return <p>Single-line without enclosing ()</p>;
                        }

                        function MultiLineComponent() {
                            return (
                                <div>
                                    <h1>Heading</h1>
                                    <p>This is a multi-line component enclosed by ().</p>
                                </div>
                            );
                        }
                        </script></code></pre>
            <div class="fragment tip">
              <span>
                Use a code formatter like
                <em>Prettier</em>.
                Enforce it by integrating it with ESLint.
              </span>
            </div>
          </section>
          <section>
            <h3>Component Splitting</h3>
            <p>Importing another component</p>
            <span class="code">WelcomePage.tsx</span>
            <!-- prettier-ignore -->
            <pre><code class="hljs javascript" data-trim data-line-numbers="1,6|"><script type="text/template">
                        import { Greeting } from './Greeting';

                        export function WelcomePage() {
                            return (
                              <div>
                                <Greeting />
                                <p>Other content</p>
                              </div>
                            );
                        }
                        </script></code></pre>
            <div class="fragment tip">
              Don't build monoliths. Split your components!
            </div>
          </section>
          <section data-auto-animate>
            <h3>Fragments</h3>
            <p>
              Components always return a
              <em>single node</em>
              .
            </p>
            <p>
              If you want to return multiple nodes, wrap them in a
              <span class="hl">Fragment</span>
              to avoid rendering an unnecessary
              <span class="code">&lt;div&gt;</span>
              .
            </p>
            <!-- prettier-ignore -->
            <pre><code class="hljs javascript" data-trim data-line-numbers="4,5|3,6|" data-id="code"><script type="text/template">
                        function MyComponent() {
                            return (
                              <>
                                <ChildComponent />
                                <p>Other content</p>
                              </>
                            );
                        }
                        </script></code></pre>
          </section>
          <section data-auto-animate>
            <h3>Fragments</h3>
            <!-- prettier-ignore -->
            <pre><code class="hljs javascript" data-trim data-line-numbers="1,5,8" data-id="code"><script type="text/template">
                        import { Fragment } from "react";

                        function MyComponent() {
                            return (
                              <Fragment>
                                <ChildComponent />
                                <p>Other content</p>
                              </Fragment>
                            );
                        }
                        </script></code></pre>
            <p>
              Using the long-form
              <span class="code">Fragment</span>
              is equivalent to the shorter
              <nobr><span class="code">&lt;&gt;…&lt;/&gt;</span></nobr>
              syntax.
            </p>
            <p class="fragment tip">
              <span>
                We will see in a bit in which situation the long-form
                <span class="code">&lt;Fragment&gt;</span>
                is useful.
              </span>
            </p>
          </section>
          <section>
            <h2>Exercise</h2>
            <ul>
              <li class="fragment">
                Setup a new React project with
                <pre>
                  <code class="hljs javascript" data-trim>
                      $ npm create vite@latest pokedex-vite
                        > React
                        > Typescript + SWC
                      $ cd ./pokedex-vite
                      $ npm install
                      $ npm run dev
                  </code>
              </pre>
              </li>
              <li class="fragment">
                Create a PokeListEntry component to show a pokémon name like
                'Bulbasaur' kept in a constant
              </li>
              <li class="fragment">
                Consume this component in the
                <span class="code">App.tsx</span>
              </li>
            </ul>
          </section>
          <section>
            <h2>Solution</h2>
            <span class="code">PokeListEntry.tsx</span>
            <!-- prettier-ignore -->
            <pre>
                    <code class="hljs jsx" data-trim>
                        <script type="text/template">
                        const name = 'World';

                        export function PokeListEntry() {
                            return (
                                <div>{name}</div>
                            );
                        }
                        </script>
                    </code>
                </pre>
          </section>
          <section>
            <h3>Solution continued</h3>
            <span class="code">App.tsx</span>
            <!-- prettier-ignore -->
            <pre>
                    <code class="hljs jsx" data-trim>
                        <script type="text/template">
                        import { PokeListEntry } from "./PokeListEntry"

                        export function App() {
                            return (
                                <PokeListEntry />
                            );
                        }
                        </script>
                    </code>
                </pre>
          </section>
        </section>
        <section>
          <section>
            <h2>Props</h2>
            <p>
              We can pass data to child components by setting their
              <span class="hl">props</span>
              (properties)
            </p>
            <p class="fragment">
              A prop can have any type, e.g. it can be a JavaScript primitive,
              an object, or a function
            </p>
            <p class="fragment">Props can be defined as required or optional</p>
            <p class="fragment">
              Pass
              <span class="hl">functions as props</span>
              to listen to
              <span class="hl">events</span>
              emitted by child components
            </p>
          </section>
          <section>
            <h3>Define Props on a component</h3>

            <p></p>
            <!-- prettier-ignore -->
            <pre><code class="hljs jsx" data-trim><script type="text/template">
                          type MyComponentProps = {
                              name: string; // required prop
                              age?: number; // optional prop
                              wearsHat?: boolean; // optional prop with default value
                          };
  
                          export function MyComponent({
                            name,
                            age,
                            wearsHat = false,
                          }: MyComponentProps) {
                              return (
                                <div>
                                  <p>Name: {name}</p>
                                  <p>Age: {age !== undefined ? age : "unknown"}</p>
                                  <p>Wears hat: {wearsHat ? "yes" : "no"}</p>
                                </div>
                              );
                          }
                        </script></code></pre>
          </section>
          <section>
            <h2>Exercise</h2>
            <ul>
              <li>
                Create Props for your PokeListEntry component expecting an
                optional name
              </li>
              <li>Set a default name if property is not passed by consumer</li>
              <li>Use object destruction</li>
            </ul>
          </section>
          <section>
            <h2>Solution</h2>
            <span class="code">PokeListEntry.tsx</span>
            <!-- prettier-ignore -->
            <pre>
                    <code class="hljs jsx" data-trim>
                        <script type="text/template">
                        type PokeListEntryProps = {
                            name?: string;
                        };

                        export function PokeListEntry({
                          name = 'Bulbasaur'
                        }: PokeListEntryProps) {
                            return (
                                <div>{name}</div>
                            );
                        }
                        </script>
                    </code>
                </pre>
          </section>
        </section>
        <section>
          <section>
            <h2>Testing</h2>
            <p>
              Our components can be tested using the
              <a href="https://vitest.dev/">Vitest</a> and <a href="https://testing-library.com/">React Testing Library</a>
            </p>
            <p>
              Add the library
            <pre
              data-id="code"
            ><code class="hljs zsh" data-trim><script type="text/template">npm install vitest @testing-library/react @testing-library/jest-dom --save-dev</script></code></pre>
          </p>
          <p>Add in the <span class="code">package.json</span> in the scripts section</p>
          <pre
            data-id="code"
          ><code class="hljs zsh" data-trim><script type="text/template">"test": "vitest",</script></code></pre>
        </p>
          </section>
          <section>
            <h2>Configure</h2>
            <span class="code">setup.ts</span>
            <pre><code class="hljs javascript" data-trim data-line-numbers="5,6|8-11"><script type="text/template">
              import { expect, afterEach } from "vitest";
              import { cleanup } from "@testing-library/react";
              import matchers from "@testing-library/jest-dom/matchers";
              
              /* extends Vitest's expect method with methods from react-testing-library */
              expect.extend(matchers);
              
              /* runs a cleanup after each test case (e.g. clearing jsdom) */
              afterEach(() => {
                cleanup();
              });
            </script></code></pre>
          </section>
          <section>
            <h2>Configure</h2>
            <span class="code">vite.config.ts</span>
            <pre><code class="hljs javascript" data-trim data-line-numbers="1|6-10"><script type="text/template">
              import { defineConfig } from "vitest/config";
              import react from "@vitejs/plugin-react-swc";
              
              export default defineConfig({
                plugins: [react()],
                test: {
                  globals: true,
                  environment: "jsdom",
                  setupFiles: "./tests/setup.ts",
                },
              });
            </script></code></pre>
          </section>
        </section>
        <section>
          <section>
            <h2>Testing our dumb component</h2>
            <span class="code">Greeting.test.tsx</span>
            <!-- prettier-ignore -->
            <pre><code class="hljs javascript" data-trim data-line-numbers="4,5,9,10|1,2,6|1,8|"><script type="text/template">
              import { render, screen } from '@testing-library/react';
              import { Greeting } from './Greeting';

              describe('Greeting', () => {
                  it('should render "Hello World"', () => {
                      render(<Greeting />);

                      expect(screen.getByText('Hello World')).toBeInTheDocument();
                  });
              });
            </script></code></pre>
            <span class="code">npm run test</span>
          </section>
          <section>
            <h2>TDD - Test Driven Development</h2>
            <p>It is a good practice to conduct TDD wherever possible</p>
            <p>
              Let us amend the component such that we can set the name through
              an
              <span class="code">name</span>
              property
            </p>
          </section>
          <section>
            <h3>Add new test case</h3>
            <span class="code">Greeting.test.tsx</span>
            <!-- prettier-ignore -->
            <pre>
                    <code class="hljs javascript" data-trim>
                      <script type="text/template">
                      it('should render correct name', () => {
                        render(<Greeting name="React Master" />);

                        expect(screen.getByText("Hello React Master"))
                          .toBeInTheDocument();
                      });
                      </script>
                    </code>
                </pre>
          </section>
          <section>
            <h3>Implement / Make the test green</h3>
            <span class="code">Greeting.tsx</span>
            <!-- prettier-ignore -->
            <pre><code class="hljs jsx" data-trim><script type="text/template">
              type Props = {
                  name?: string;
              };

              export function Greeting({ name = 'World' }: Props) {
                  return <div>Hello {name}</div>;
              }
            </script></code></pre>
          </section>
          <section>
            <h3>Refactor</h3>
            <p>
              Refactor your code such that it is extensible and easy to
              understand
            </p>
            <!-- prettier-ignore -->
            <pre><code class="hljs javascript" data-trim><script type="text/template">
              it('should render correct name', () => {
                const name = 'React Master';

                render(<Greeting name={name} />);

                expect(screen.getByText(`Hello ${name}`))
                  .toBeInTheDocument();
              });
            </script></code></pre>
          </section>
          <section>
            <h2>Cheat Sheet</h2>
            <ul>
              <li>
                <span class="code">getBy*</span>
                - verify that an element/node is present at this very moment.
                Throws an error if element/node is not found.
              </li>
              <li>
                <span class="code">queryBy*</span>
                - similar to
                <span class="code">getBy*</span>
                , but will not throw an error if the element/node is absent.
              </li>
              <li>
                <span class="code">findBy*</span>
                - verify that an element will be present, e.g. upon completion
                of an asynchronous API-Call
              </li>
            </ul>
            <p>
              <a
                target="_blank"
                href="https://testing-library.com/docs/queries/about/"
                >Find more about queries here</a
              >
            </p>
          </section>
          <section>
            <h2>Exercise</h2>
            <ul>
              <li>
                Test your PokeListEntry component with React Testing Library
              </li>
              <li>
                Stretch Goal:
                <a
                  href="https://jestjs.io/docs/api#testeachtablename-fn-timeout"
                  target="_blank"
                >
                  Parameterize your test with React Testing Library using
                </a>
                <span class="code">it.each(table)(name, fn, timeout)</span>
              </li>
            </ul>
          </section>
          <section>
            <h2>Solution</h2>
            <span class="code">PokeListEntry.test.tsx</span>
            <!-- prettier-ignore -->
            <pre>
                    <code class="hljs javascript" data-trim>
                        <script type="text/template">
                        it('should render Bulbasaur if no name is passed', () => {
                            const name = 'Bulbasaur';
                            render(<PokeListEntry />);
                            expect(screen.getByText(name)).toBeInTheDocument();
                        });

                        it('should render the passed pokémon name', () => {
                            const name = 'Pickachu';
                            render(<PokeListEntry name={name} />);
                            expect(screen.getByText(name)).toBeInTheDocument();
                        });
                        </script>
                    </code>
                </pre>
          </section>
          <section>
            <h3>Solution continued</h3>
            <span class="code">PokeListEntry.test.tsx</span>
            <pre>
                    <code class="hljs javascript" data-trim>
                        <script type="text/template">
                        it.each(['Bulbasaur', 'Eevee', 'Pickachu'])
                          ('should render the passed pokémon %s', (name) => {
                          render(<PokeListEntry name={name} />);
                          expect(screen.getByText(name)).toBeInTheDocument();
                        });
                        </script>
                    </code>
                </pre>
          </section>
          <section>
            <h3>Follow-Up: Continuous Integration</h3>

            <p>On your CI pipeline you typically want to ensure the quality of the solution</p>
            <ul>
              <li>
                <span class="code">npm run test:ci</span> which is defined in package.json with the command <span class="code">vitest run</span> without watchmode
              </li>
              <li><span class="code">npm run lint</span></li>
              <li><span class="code">npm run build</span></li>
            </ul>
          </section>
        </section>

        <section>
          <section>
            <h2>List</h2>
          </section>
          <section data-auto-animate>
            <p>
              To render a list of items, we call the
              <span class="code">map</span>
              function on an array.
              <br />
              In the callback we map the array item to a JSX element.
            </p>

            <p>We can map to an HTML element or to a custom component.</p>
            <!-- prettier-ignore -->
            <pre data-id="code"><code class="hljs javascript" data-trim data-line-numbers="5-7|"><script type="text/template">
                        const items = ['Apple', 'Orange', 'Mango'];
                        export function List() {
                            return (
                                <ul>
                                    {items.map(
                                        item => <li key={item}>{item}</li>
                                    )}
                                </ul>
                            );
                        }</script></code></pre>
          </section>
          <section data-auto-animate>
            <!-- prettier-ignore -->
            <pre data-id="code"><code class="hljs javascript" data-trim data-line-numbers="6"><script type="text/template">
                        const items = ['Apple', 'Orange', 'Mango'];
                        export function List() {
                            return (
                                <ul>
                                    {items.map(
                                        item => <li key={item}>{item}</li>
                                    )}
                                </ul>
                            );
                        }</script></code></pre>

            <p>
              The JSX element returned from
              <span class="code">map</span>
              must have a
              <span class="hl">key</span>
              prop.
            </p>

            <p class="fragment">
              This is a special prop used by React internally to distinguish the
              elements. It must be
              <span class="hl">unique within the list</span>
              (e.g. an entity ID).
            </p>
          </section>
          <section data-auto-animate>
            <p>
              Use a
              <span class="hl">Fragment</span>
              to return multiple elements from
              <span class="code">map</span>
              .
            </p>
            <!-- prettier-ignore -->
            <pre data-id="code"><code class="hljs javascript" data-trim data-line-numbers="6-9,11-12,14-17|1,10,13"><script type="text/template">
                        import { Fragment } from "react";

                        const items = [{ id: 1, … }, { id: 2, … }, { id: 3, … }];
                        export function List() {
                            return (
                                <table>
                                  <tbody>
                                    {items.map(
                                        item => (
                                          <Fragment key={item.id}>
                                            <tr>…</tr>
                                            <tr>…</tr>
                                          </Fragment>
                                        )
                                    )}
                                  <tbody>
                                </table>
                            );
                        }</script></code></pre>
            <p class="fragment tip">
              <span>
                Here we can't use the shorter
                <span class="code">&lt;&gt;…&lt;/&gt;</span>
                syntax. Only
                <span class="code">Fragment</span>
                can take the key prop.
              </span>
            </p>
          </section>
        </section>
        <section>
          <section><h2>The children prop</h2></section>
          <section>
            <p>Like HTML elements, React components can be nested:</p>

            <pre>
            <code class="hljs jsx" data-trim>
                <script type="text/template">
                export function App() {
                  return (
                    <ContentContainer title="Profile">
                      <ProfilePicture />
                      <Bio />
                      <ScrollableSection>
                        <ProjectList />
                      </ScrollableSection>
                    </ContentContainer>
                  );
                }
                </script>
            </code>
        </pre>
          </section>
          <section data-auto-animate>
            <p>
              The parent component receives the child components through the
              <span class="hl">children</span>
              prop.
            </p>

            <pre>
            <code class="hljs jsx" data-trim data-line-numbers="1,3,5,9" data-id="code">
                <script type="text/template">
                import { PropsWithChildren } from "react"

                type ContentContainerProps = PropsWithChildren<{
                  title: string
                }>;

                function ContentContainer({
                  title,
                  children,
                }: ContentContainerProps) {
                  return (
                    <div className="content-container">
                      …
                    </div>
                  );
                }
                </script>
            </code>
        </pre>
          </section>
          <section data-auto-animate>
            <pre>
            <code class="hljs jsx" data-trim data-line-numbers="3,11" data-id="code">
                <script type="text/template">
                function ContentContainer({
                  title,
                  children,
                }: ContentContainerProps) {
                  return (
                    <div className="content-container">
                      <div className="heading">
                        <h1>{title}</h1>
                      </div>
                      <div className="content">
                        {children}
                      </div>
                    </div>
                  );
                }
                </script>
            </code>
        </pre>

            <p>
              The children prop can be rendered in the parent component's JSX.
            </p>
          </section>
        </section>
        <section>
          <section>
            <h2>Exercise</h2>
            <ul>
              <li>
                Create a (hard-coded)
                <a
                  target="_blank"
                  href="https://pokeapi.co/api/v2/pokemon?limit=50"
                  >array of Pokémon</a
                >
              </li>
              <li class="fragment">
                Render all Pokémon names in a list (hint: add a new
                <span class="code">PokeList.tsx</span> component)
              </li>
              <li class="fragment">
                Make the name in
                <span class="code">PokeListEntry.tsx</span>
                required
              </li>
              <li class="fragment">Write tests for the list</li>
              <li class="fragment">
                Create a
                <span class="hl">Layout component</span>
                which wraps the list with a page structure (containing a nav bar
                with dummy links)
              </li>
            </ul>
          </section>
          <section>
            <img
              src="../img/exercise-goal-list-and-layout.png"
              alt="Exercise goal"
            />
          </section>
        </section>
        <section>
          <section>
            <h2>Solution</h2>
          </section>
          <section>
            <!-- prettier-ignore -->
            <pre>
                    <code class="hljs javascript" data-trim>
                        <script type="text/template">
                        import PokeListEntry from "./PokeListEntry";

                        const pokemons = […];

                        export function PokeList() {
                          return (
                            <ul>
                              {pokemons.map((pokemon) => (
                                <PokeListEntry
                                    key={pokemon.name}
                                    name={pokemon.name}
                                />
                              ))}
                            </ul>
                          );
                        }
                        </script>
                    </code>
                </pre>
          </section>
          <section>
            <h3>Solution continued</h3>
            <!-- prettier-ignore -->
            <pre>
                    <code class="hljs javascript" data-trim>
                        <script type="text/template">
                        type PokeListEntryProps = {
                          name: string;
                        };

                        export function PokeListEntry({
                          name
                        }: PokeListEntryProps) {
                          return <li>{name}</li>;
                        }
                        </script>
                    </code>
                </pre>
          </section>
          <section>
            <h3>Solution continued</h3>
            <!-- prettier-ignore -->
            <pre>
                    <code class="hljs javascript" data-trim>
                        <script type="text/template">
                        type LayoutProps = PropsWithChildren;

                        export function Layout({ children }: LayoutProps) {
                          return (
                            <>
                              <header>
                                <nav>
                                  <a href="#">Home</a> | <a href="#">Profile</a>
                                </nav>
                              </header>
                              <main>{children}</main>
                            </>
                          );
                        }
                        </script>
                    </code>
                </pre>
          </section>
          <section>
            <h3>Solution continued</h3>
            <!-- prettier-ignore -->
            <pre>
                    <code class="hljs javascript" data-trim>
                        <script type="text/template">
                        import Layout from "./Layout";
                        import PokeList from "./PokeList";
  
                        export function App() {
                          return (
                            <Layout>
                              <PokeList />
                            </Layout>
                          );
                        }
                        </script>
                    </code>
                </pre>
          </section>
        </section>
        <section>
          <h2>Recap</h2>

          <p>We learned&hellip;</p>

          <ul>
            <li>How to create a simple React component and import it</li>
            <li>Use props to pass data into a component</li>
            <li>Write tests to verify the components behaviour</li>
            <li>Render a list of components</li>
            <li>
              Create wrapper components using the
              <span class="hl">children</span>
              prop
            </li>
          </ul>
        </section>
        <section class="break-slide">
          <h1>Questions?</h1>
        </section>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/gh/Zuehlke/zuehlke-reveal-package@f42658c99dec0812d754d935263a70b93b81f54b/release/index.js"></script>
    <script>
      setupZuehlkeRevealPresentation();
    </script>
  </body>
</html>
