<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>05 First Component | Essential React</title>

    <link rel="icon" href="../img/zuehlke_logo.jpg" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/gh/webplatformz/zuehlke-reveal-package@aa0782bae9e270f4153d310e9f42bea172788e21/release/index.css"
    />
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section class="deck-slide">
          <h1>
            Essential React
            <br />
            05 First Component
          </h1>
        </section>
        <section>
          <section>
            <h2>Simple React Component</h2>
            <span class="code">Greeting.tsx</span>
            <!-- prettier-ignore -->
            <pre>
                    <code class="hljs jsx" data-trim>
                        <script type="text/template">
                        const name = 'World';

                        function Greeting() {
                            return (
                                <div>
                                  <h1>Hello, {name}</h1>
                                  <p>This is your first component!</p>
                                </div>
                            );
                        }

                        export default Greeting;
                        </script>
                    </code>
                </pre>
          </section>
          <section>
            <h3>Single-line vs. multi-line JSX</h3>
            <p>Multi-line JSX should always be wrapped in parentheses.</p>
            <!-- prettier-ignore -->
            <pre><code class="hljs jsx" data-trim data-line-numbers="2,6,11|"><script type="text/template">
                        function SingleLineComponent() {
                            return <p>Single-line without enclosing ()</p>;
                        }

                        function MultiLineComponent() {
                            return (
                                <div>
                                    <h1>Heading</h1>
                                    <p>This is a multi-line component enclosed by ().</p>
                                </div>
                            );
                        }
                        </script></code></pre>
            <div class="fragment tip">
              <span
                >Use a code formatter like
                <a href="https://prettier.io/">Prettier</a></span
              >
            </div>
          </section>
          <section>
            <h3>Component Splitting</h3>
            <p>Importing another component</p>
            <span class="code">WelcomePage.tsx</span>
            <!-- prettier-ignore -->
            <pre><code class="hljs javascript" data-trim data-line-numbers="1,6|"><script type="text/template">
                        import Greeting from './greeting';

                        export default function WelcomePage() {
                            return (
                              <div>
                                <Greeting />
                                <p>Other content</p>
                              </div>
                            );
                        }
                        </script></code></pre>
            <div class="fragment tip">
              Don't build monoliths. Split your components!
            </div>
          </section>
          <section>
            <h3>Fragments</h3>
            <p>Components always return a <em>single node</em>.</p>
            <p>
              If you want to return multiple elements, wrap them in a
              <span class="warn">Fragment</span> to avoid rendering an
              unnecessary <span class="code">&lt;div&gt;</span>.
            </p>
            <!-- prettier-ignore -->
            <pre><code class="hljs javascript" data-trim data-line-numbers="3,6|"><script type="text/template">
                        function MyComponent() {
                            return (
                              <>
                                <ChildComponent />
                                <p>Other content</p>
                              </>
                            );
                        }
                        </script></code></pre>
          </section>
          <section>
            <h2>Exercise</h2>
            <ul>
              <li class="fragment">
                Setup a new React project with
                <br />
                <span class="code"
                  >npx create-react-app name --template typescript</span
                >
              </li>
              <li class="fragment">
                Create a PokeListEntry component to show a pokémon name like
                'Bulbasaur' kept in a constant
              </li>
              <li class="fragment">
                Consume this component in the
                <span class="code">App.tsx</span>
              </li>
            </ul>
          </section>
          <section>
            <h2>Solution</h2>
            <span class="code">PokeListEntry.tsx</span>
            <!-- prettier-ignore -->
            <pre>
                    <code class="hljs jsx" data-trim>
                        <script type="text/template">
                        const name = 'World';

                        export default function PokeListEntry() {
                            return (
                                <div>{name}</div>
                            );
                        }
                        </script>
                    </code>
                </pre>
          </section>
          <section>
            <h3>Solution continued</h3>
            <span class="code">App.tsx</span>
            <!-- prettier-ignore -->
            <pre>
                    <code class="hljs jsx" data-trim>
                        <script type="text/template">
                        import PokeListEntry from "./PokeListEntry.tsx"

                        export default function App() {
                            return (
                                <PokeListEntry />
                            );
                        }
                        </script>
                    </code>
                </pre>
          </section>
        </section>
        <section>
          <section>
            <h2>Props</h2>
            <p>
              We can pass data to child components by setting their
              <span class="warn">props</span> (properties)
            </p>
            <p class="fragment">
              A prop can have any type, e.g. it can be a JavaScript primitive,
              an object, or a function
            </p>
            <p class="fragment">Props can be defined as required or optional</p>
            <p class="fragment">
              Pass <span class="warn">functions as props</span> to listen to
              <span class="warn">events</span> emitted by child components
            </p>
          </section>
          <section>
            <h3>Define Props on a component</h3>

            <p></p>
            <!-- prettier-ignore -->
            <pre><code class="hljs jsx" data-trim><script type="text/template">
                          type MyComponentProps = {
                              name: string; // required prop
                              age?: number; // optional prop
                              wearsHat?: boolean; // optional prop with default value
                          };
  
                          export default function MyComponent({
                            name,
                            age,
                            wearsHat = false,
                          }: MyComponentProps) {
                              return (
                                <div>
                                  <p>Name: {name}</p>
                                  <p>Age: {age !== undefined ? age : "unknown"}</p>
                                  <p>Wears hat: {wearsHat ? "yes" : "no"}</p>
                                </div>
                              );
                          }
                        </script></code></pre>
          </section>
          <section>
            <h2>Exercise</h2>
            <ul>
              <li>
                Create Props for your PokeListEntry component expecting an
                optional name
              </li>
              <li>Set a default name if property is not passed by consumer</li>
              <li>Use object destruction</li>
            </ul>
          </section>
          <section>
            <h2>Solution</h2>
            <span class="code">PokeListEntry.tsx</span>
            <!-- prettier-ignore -->
            <pre>
                    <code class="hljs jsx" data-trim>
                        <script type="text/template">
                        type PokeListEntryProps = {
                            name?: string;
                        };

                        export default function PokeListEntry({
                          name = 'Bulbasaur'
                        }: PokeListEntryProps) {
                            return (
                                <div>{name}</div>
                            );
                        }
                        </script>
                    </code>
                </pre>
          </section>
        </section>
        <section>
          <section>
            <h2>Testing / React Testing Library</h2>
            <p>
              Our components can be tested using the
              <a
                href="https://testing-library.com/docs/react-testing-library/intro/"
                >React Testing Library</a
              >
            </p>

            <p class="fragment">
              It is already pre-installed when using Create React App.
            </p>
          </section>
          <section>
            <h2>Testing our dumb component</h2>
            <span class="code">Greeting.test.tsx</span>
            <!-- prettier-ignore -->
            <pre><code class="hljs javascript" data-trim data-line-numbers="4,5,9,10|1,6|6,8|"><script type="text/template">
              import { render, screen } from '@testing-library/react';
              import Greeting from './Greeting';

              describe('Greeting', () => {
                  it('should render "Hello World"', () => {
                      render(<Greeting/>);

                      expect(screen.getByText('Hello World')).toBeInTheDocument();
                  });
              });
            </script></code></pre>
          </section>
          <section>
            <h2>TDD - Test Driven Development</h2>
            <p>It is a good practice to conduct TDD wherever possible</p>
            <p>
              Let us amend the component such that we can set the name through
              an input property
            </p>
          </section>
          <section>
            <h3>Add new test case</h3>
            <span class="code">Greeting.test.tsx</span>
            <!-- prettier-ignore -->
            <pre>
                    <code class="hljs javascript" data-trim>
                      <script type="text/template">
                      it('should render correct name', () => {
                        render(<Greeting name="React Master" />);

                        expect(screen.getByText("Hello React Master")).toBeInTheDocument();
                      });
                      </script>
                    </code>
                </pre>
          </section>
          <section>
            <h3>Implement / Make the test green</h3>
            <span class="code">Greeting.tsx</span>
            <!-- prettier-ignore -->
            <pre><code class="hljs jsx" data-trim><script type="text/template">
              type Props = {
                  name?: string;
              };

              function Greeting({name = 'World'}: Props) {
                  return <div>Hello {name}</div>;
              }

              export default Greeting;
            </script></code></pre>
          </section>
          <section>
            <h3>Refactor</h3>
            <p>
              Refactor your code such that it is extensible and easy to
              understand
            </p>
            <!-- prettier-ignore -->
            <pre><code class="hljs javascript" data-trim><script type="text/template">
              it('should render correct name', () => {
                const name = 'React Master';

                render(<Greeting name={name} />);

                expect(screen.getByText(`Hello ${name}`)).toBeInTheDocument();
              });
            </script></code></pre>
          </section>
          <section>
            <h2>Cheat Sheet</h2>
            <ul>
              <li>
                <span class="code">getBy*</span>
                - verify that an element/node is present at this very moment.
                Throws an error if element/node is not found.
              </li>
              <li>
                <span class="code">queryBy*</span>
                - similar to
                <span class="code">getBy*</span>
                , but will not throw an error if the element/node is absent.
              </li>
              <li>
                <span class="code">findBy*</span>
                - verify that an element will be present, e.g. upon completion
                of an asynchronous API-Call
              </li>
            </ul>
            <p>
              <a
                target="_blank"
                href="https://testing-library.com/docs/queries/about/"
                >Find more about queries here</a
              >
            </p>
          </section>
          <section>
            <h2>Exercise</h2>
            <ul>
              <li>
                Test your PokeListEntry component with React Testing Library
              </li>
              <li>
                Stretch Goal:
                <a
                  href="https://jestjs.io/docs/api#testeachtablename-fn-timeout"
                  target="_blank"
                >
                  Parameterize your test with React Testing Library using
                </a>
                <span class="code">it.each(table)(name, fn, timeout)</span>
              </li>
            </ul>
          </section>
          <section>
            <h2>Solution</h2>
            <span class="code">PokeListEntry.test.tsx</span>
            <!-- prettier-ignore -->
            <pre>
                    <code class="hljs javascript" data-trim>
                        <script type="text/template">
                        it('should render Bulbasaur if no name is passed', () => {
                            const name = 'Bulbasaur';
                            render(<PokeListEntry />);
                            expect(screen.getByText(name)).toBeInTheDocument();
                        });

                        it('should render the passed pokémon name', () => {
                            const name = 'Pickachu';
                            render(<PokeListEntry name={name} />);
                            expect(screen.getByText(name)).toBeInTheDocument();
                        });
                        </script>
                    </code>
                </pre>
          </section>
          <section>
            <h3>Solution continued</h3>
            <span class="code">PokeListEntry.test.tsx</span>
            <!-- prettier-ignore -->
            <pre>
                    <code class="hljs javascript" data-trim>
                        <script type="text/template">
                        it.each(['Bulbasaur', 'Eevee', 'Pickachu'])
                          ('should render the passed pokémon name', (name) => {
                          render(<PokeListEntry name={name} />);
                          expect(screen.getByText(name)).toBeInTheDocument();
                        });
                        </script>
                    </code>
                </pre>
          </section>
        </section>

        <section>
          <section>
            <h2>List</h2>
          </section>
          <section data-auto-animate>
            <p>
              To render a list of items, we call the
              <span class="code">map</span>
              function on an array.<br />In the callback we map the array item
              to a JSX element.
            </p>

            <p>We can map to an HTML element or to a custom component.</p>
            <!-- prettier-ignore -->
            <pre data-id="code"><code class="hljs javascript" data-trim data-line-numbers="5-7|"><script type="text/template">
                        export default function List() {
                            const items = ['Apple', 'Orange', 'Mango'];
                            return (
                                <ul>
                                    {items.map(
                                        item => <li key={item}>{item}</li>
                                    )}
                                </ul>
                            );
                        }</script></code></pre>
          </section>
          <section data-auto-animate>
            <!-- prettier-ignore -->
            <pre data-id="code"><code class="hljs javascript" data-trim data-line-numbers="6"><script type="text/template">
                        export default function List() {
                            const items = ['Apple', 'Orange', 'Mango'];
                            return (
                                <ul>
                                    {items.map(
                                        item => <li key={item}>{item}</li>
                                    )}
                                </ul>
                            );
                        }</script></code></pre>

            <p>
              The JSX element returned from <span class="code">map</span> must
              have a <span class="warn">key</span> prop.
            </p>

            <p class="fragment">
              This is a special prop used by React internally to distinguish the
              elements. It must be
              <span class="warn">unique within the list</span> (e.g. an entity
              ID).
            </p>
          </section>
        </section>
        <section>
          <section><h2>The children prop</h2></section>
          <section>
            <p>Like HTML elements, React components can be nested:</p>

            <pre>
            <code class="hljs jsx" data-trim>
                <script type="text/template">
                export default function App() {
                  return (
                    <ContentContainer title="Profile">
                      <ProfilePicture />
                      <Bio />
                      <ScrollableSection>
                        <ProjectList />
                      </ScrollableSection>
                    </ContentContainer>
                  );
                }
                </script>
            </code>
        </pre>
          </section>
          <section data-auto-animate>
            <p>
              The parent component receives the child components through the
              <span class="warn">children</span> prop.
            </p>

            <pre>
            <code class="hljs jsx" data-trim data-line-numbers="1,5,14,16" data-id="code">
                <script type="text/template">
                import { PropsWithChildren } from "react"

                function ContentContainer({
                  title,
                  children,
                }: ContentContainerProps) {
                  return (
                    <div className="content-container">
                      …
                    </div>
                  );
                }

                type ContentContainerProps = PropsWithChildren<{
                  title: string
                }>;
                </script>
            </code>
        </pre>
          </section>
          <section data-auto-animate>
            <pre>
            <code class="hljs jsx" data-trim data-line-numbers="3,11" data-id="code">
                <script type="text/template">
                function ContentContainer({
                  title,
                  children,
                }: ContentContainerProps) {
                  return (
                    <div className="content-container">
                      <div className="heading">
                        <h1>{title}</h1>
                      </div>
                      <div className="content">
                        {children}
                      </div>
                    </div>
                  );
                }
                </script>
            </code>
        </pre>

            <p>
              The children prop can be rendered in the parent component's JSX.
            </p>
          </section>
        </section>
        <section>
          <section>
            <h2>Exercise</h2>
            <ul>
              <li>
                Create a (hard-coded)
                <a
                  target="_blank"
                  href="https://pokeapi.co/api/v2/pokemon?limit=50"
                  >array of Pokémon</a
                >
              </li>
              <li class="fragment">Render all Pokémon names in a list</li>
              <li class="fragment">
                Make the name in
                <span class="code">PokeListEntry.tsx</span>
                required
              </li>
              <li class="fragment">Write tests for the list</li>
              <li class="fragment">
                Create a <span class="warn">Layout component</span> which wraps
                the list with a page structure (containing a nav bar with dummy
                links)
              </li>
            </ul>
          </section>
          <section>
            <img
              src="../img/exercise-goal-list-and-layout.png"
              alt="Exercise goal"
            />
          </section>
        </section>
        <section>
          <section>
            <h2>Solution</h2>
          </section>
          <section>
            <!-- prettier-ignore -->
            <pre>
                    <code class="hljs javascript" data-trim>
                        <script type="text/template">
                        import PokeListEntry from "./PokeListEntry";

                        export default function PokeList() {
                          const pokemons = […];
                          return (
                            <ul>
                              {pokemons.map((pokemon) => (
                                <PokeListEntry
                                    key={pokemon.name}
                                    name={pokemon.name}
                                />
                              ))}
                            </ul>
                          );
                        }
                        </script>
                    </code>
                </pre>
          </section>
          <section>
            <h3>Solution continued</h3>
            <!-- prettier-ignore -->
            <pre>
                    <code class="hljs javascript" data-trim>
                        <script type="text/template">
                        type PokeListEntryProps = {
                          name: string;
                        };

                        export default function PokeListEntry({
                          name
                        }: PokeListEntryProps) {
                          return <li>{name}</li>;
                        }
                        </script>
                    </code>
                </pre>
          </section>
          <section>
            <h3>Solution continued</h3>
            <!-- prettier-ignore -->
            <pre>
                    <code class="hljs javascript" data-trim>
                        <script type="text/template">
                        type LayoutProps = PropsWithChildren<{
                          name: string;
                        }>;

                        export default function Layout({ children }: LayoutProps) {
                          return (
                            <>
                              <header>
                                <nav>
                                  <a href="#">Home</a> | <a href="#">Profile</a>
                                </nav>
                              </header>
                              <main>{children}</main>
                            </>
                          );
                        }
                        </script>
                    </code>
                </pre>
          </section>
          <section>
            <h3>Solution continued</h3>
            <!-- prettier-ignore -->
            <pre>
                    <code class="hljs javascript" data-trim>
                        <script type="text/template">
                        import Layout from "./Layout";
                        import PokeList from "./PokeList";
  
                        export default function App() {
                          return (
                            <Layout>
                              <PokeList />
                            </Layout>
                          );
                        }
                        </script>
                    </code>
                </pre>
          </section>
        </section>
        <section>
          <h2>Recap</h2>

          <p>We learned&hellip;</p>

          <ul>
            <li>How to create a simple React component and import it</li>
            <li>Use props to pass data into a component</li>
            <li>Write tests to verify the components behaviour</li>
            <li>Render a list of components</li>
          </ul>
        </section>
        <section class="deck-slide">
          <h1>Questions?</h1>
        </section>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/gh/webplatformz/zuehlke-reveal-package@aa0782bae9e270f4153d310e9f42bea172788e21/release/index.js"></script>
    <script>
      setupZuehlkeRevealPresentation();
    </script>
  </body>
</html>
