<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>09 Form | Essential React</title>

    <link rel="icon" href="../img/zuehlke_logo.jpg" />
    <link rel="stylesheet" href="../dist/reset.css" />
    <link rel="stylesheet" href="../dist/reveal.css" />
    <link rel="stylesheet" href="../css/theme/zuehlke.css" />

    <!-- Theme used for syntax highlighted code -->
    <link rel="stylesheet" href="../plugin/highlight/monokai.css" />
  </head>
  <body>
    <div class="reveal">
      <div class="slides">
        <section class="deck-slide">
          <h1>
            Essential React <br />
            09 Form
          </h1>
        </section>

        <section>
          <section>
            <h2>Different Form Tags</h2>
            <ul>
              <li>input / textarea</li>
              <li>select</li>
              <li>checkbox</li>
              <li>radio</li>
            </ul>
          </section>
          <section>
            <h2>input / textarea</h2>
            <p><pre data-id="code"><code class="hljs html" data-trim><script type="text/template">
                const [value, setValue] = useState();
                …
                <input
                  value={value}
                  onChange={e => { setValue(e.target.value) }}
                />
            </script></code></pre></p>
          </section>
          <section>
            <h2>select</h2>
            <p><pre data-id="code"><code class="hljs html" data-trim><script type="text/template">
                const [option, setOption] = useState();
                …
                <select
                  value={option}
                  onChange={e => { setOption(e.target.value) }}
                >
                  <option value="grapefruit">Grapefruit</option>
                  <option value="lime">Lime</option>
                </select>
            </script></code></pre></p>
          </section>
          <section>
            <h2>checkbox</h2>
            <p><pre data-id="code"><code class="hljs html" data-trim><script type="text/template">
                const [checked, setChecked] = useState();
                …
                <input
                  type="checkbox"
                  checked={checked}
                  onChange={(e) => { setChecked(e.target.checked) }}
                />
            </script></code></pre></p>
          </section>
          <section>
            <h2>radio</h2>
            <p><pre data-id="code"><code class="hljs html" data-trim><script type="text/template">
                const [option, setOption] = useState();
                …
                <input
                  type="radio"
                  name="preference"
                  value="tomato"
                  checked={option === "tomato"}
                  onChange={(e) => { setOption(e.target.value) }}
                />
            </script></code></pre></p>
          </section>
        </section>

        <section>
          <section>
            <h2>Controlled vs. Uncontrolled</h2>
          </section>
          <section>
            <h2>Controlled</h2>
            <ul>
              <li>Form Data is handled by a React component</li>
              <li>Updates state with each change event causing re-renders
                <ul>
                  <li>Can occur on a keystroke</li>
                  <li>When selecting an option form a Dropdown</li>
                  <li>…</li>
                </ul>
              </li>
            </ul>
          </section>

          <section>
            <h2>Uncontrolled</h2>
            <ul>
              <li>Form Data is handled by the DOM itself</li>
              <li>Read values only on blur / submit to prevent needless re-renders</li>
              <li>Sometimes controlled fields are unavoidable
                <ul>
                  <li>React-Select</li>
                  <li>Material-UI</li>
                  <li>…</li>
                </ul>
              </li>
            </ul>
          </section>
          <section>
            <p><pre data-id="code"><code class="hljs javascript" data-trim><script type="text/template">
                import {FormEventHandler, useRef} from 'react';

                export default function RegistrationForm() {
                  const inputEl = useRef<HTMLInputElement | null>(null);

                  const handleSubmit: FormEventHandler<HTMLFormElement> =
                    (event) => {
                      console.log(inputEl.current?.value);
                      event.preventDefault();
                  };

                  return (
                      <form onSubmit={handleSubmit}>
                          <label htmlFor="name">Name</label>
                          <input id="name" type="text" ref={inputEl} />
                          <input type="submit" value="Submit" />
                      </form>
                  );
                }
            </script></code></pre></p>
            <div class="fragment tip">
              To leverage uncontrolled form fields, using a library is advised
            </div>
          </section>
        </section>

        <section>
          <section>
            <h2>Form Libraries</h2>
            <p>Form handling can be quite repetitive, the usage of a helper library should therefore be considered.</p>
            <ul>
              <li>React Hook Form</li>
              <li>Formik</li>
            </ul>
          </section>
          <section>
            <h2>React Hook Form</h2>
            <pre>
              <code class="hljs javascript" data-trim data-noescape>
                const {
                  register,
                  handleSubmit,
                } = useForm();
                const onSubmit = data => { console.log(data); };
                const onError = error => { console.log(error); };
              </code>
            </pre>
            <pre>
              <code class="hljs html" data-trim data-noescape>
                &lt;form onSubmit={handleSubmit(onSubmit, onError)}&gt;
                  &lt;input defaultValue="test"
                    {...register("example", {/*validations*/})}
                  /&gt;
                  &lt;input type="submit" /&gt;
                &lt;/form&gt;
              </code>
            </pre>
            <div class="fragment tip">
              React Hook Form is enabling you to easily set and update form state as well as execute validation with adequate error-handling.
            </div>
          </section>
        </section>
        <section class="deck-slide">
          <h1>Questions?</h1>
        </section>
      </div>
    </div>

    <script src="../dist/reveal.js"></script>
    <script src="../plugin/notes/notes.js"></script>
    <script src="../plugin/markdown/markdown.js"></script>
    <script src="../plugin/highlight/highlight.js"></script>
    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
      });
    </script>
  </body>
</html>
